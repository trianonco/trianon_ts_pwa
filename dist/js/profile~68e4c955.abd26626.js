(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile~68e4c955"],{"08a4":function(t,i,n){"use strict";var e=n("9715"),s=n("24ec"),o=(n("a99c"),n("2877")),a=Object(o["a"])(s["a"],e["a"],e["b"],!1,null,null,null);i["a"]=a.exports},dad8:function(t,i,n){"use strict";n("28a5"),n("7f7f");var e=n("8dc2"),s=n.n(e),o=n("59ca"),a=n.n(o),h=n("fc1f"),r=n("6821f");i["a"]={name:"CardShoppingCartItemComponent",components:{VLazyImage:s.a},data:function(){return{UX:{isCardOpen:!0,isEmpty:!0},PAYU_OPTIONS:{TEST:{url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"4Vj8eK4rloUd272L48hsrarnUA",accountId:"512321",merchantId:"508029"},JORGE_MAYORGA:{url:"https://checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"4bk50ANMJ03RzWeFPVZ4Ca8Tnx",accountId:"672018",merchantId:"669392"},TRIANON:{url:"https://checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"0t4jk46T6YA78S2dios6WQBSbP",accountId:"544845",merchantId:"542713"}},PAYU:{},BUY:{ID:"",state:"IN PROCESS: WATING FOR PAYMENT",email:"",meta:{items:0,total:0,createdAt:new Date,updatedAt:new Date},shipping:{address:"",info:"",neighbourhood:"",department:"",city:"",country:"",name:"",phone:"",email:"",tracker_code:"",tracker_link:"",shipping_company:"",delivery_date:""},billing:{number:"",subtotal_price:"",total_price:"",shipping_price:"",name:"",cc:"",phone:"",email:""},comment:"",products:[]}}},props:["items","item","isLast"],mounted:function(){console.clear(),console.warn(""),console.warn(" ------------------------------------------- "),console.warn(" Proceso de Compra Trianon PWA "),console.warn(" ------------------------------------------ "),console.warn("");var t="TRIANON",i=this.PAYU_OPTIONS[t];this.PAYU=i,console.warn({PAYU_SETTINGS:this.PAYU}),"JORGE_MAYORGA"===t&&(this.BUY.shipping.address="Calle 141 #7b - 86",this.BUY.shipping.info="Apto 502",this.BUY.shipping.neighbourhood="Belmira",this.BUY.shipping.department="Bogota",this.BUY.shipping.city="Bogota",this.BUY.shipping.name="Jorge L. Mayorga",this.BUY.shipping.phone="3005318387"),"TEST"===t&&(this.BUY.shipping.address="Calle Av Siempre Viva #70c - 86",this.BUY.shipping.info="Casa 124",this.BUY.shipping.neighbourhood="La Soledad",this.BUY.shipping.department="Bogota",this.BUY.shipping.city="Bogota",this.BUY.shipping.name="Jorge L. Mayorga",this.BUY.shipping.phone="3005318387");var n=new Date,e=JSON.stringify(navigator.userAgent);this.BUY.shipping.email=JSON.parse(localStorage.getItem("user")).email,this.BUY.email=this.BUY.shipping.email,this.BUY.ID=r(n+e+Math.random()+this.item.ref),console.warn({md5:this.getPaySignature(),apiKey:this.PAYU.apiKey,merchandId:this.getPayMerchantID(),referenceCode:this.getPayReferenceCode(),amount:this.getPayAmount(),currency:this.getPayCurrency()})},methods:{getPayMerchantID:function(){return this.PAYU.merchantId},getPayAccountID:function(){return this.PAYU.accountId},getPayReferenceCode:function(){return this.BUY.ID},getPayConfirmationURL:function(){return this.PAYU.confirmationURL},getPayShippingAddress:function(){return"".concat(this.BUY.shipping.address," ").concat(this.BUY.shipping.info)},getPayShippingCity:function(){return"".concat(this.BUY.shipping.department," ").concat(this.BUY.shipping.city)},getPayClientEmail:function(){return this.BUY.shipping.email},getPayUpdateURL:function(){var t="https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInBuy?ID="+this.BUY.ID;return t},getPayCurrency:function(){return"COP"},getPayTaxReturnBase:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){return 0}parseFloat(this.BUY.billing.total_price);return 0},getPayTax:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){return 0}parseFloat(this.BUY.billing.total_price);return 0},getPayAmount:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){var t=12e3;return t.toFixed(2)}var i=parseFloat(this.BUY.billing.total_price+"");return i.toFixed(2)},getPayDescription:function(){return"".concat(this.item.description," ").concat(this.item.line," COLOR : ").concat(this.item.color," REF ").concat(this.item.ref," ")},getPaySignature:function(){var t=r("".concat(this.PAYU.apiKey,"~").concat(this.PAYU.merchantId,"~").concat(this.getPayReferenceCode(),"~").concat(this.getPayAmount(),"~").concat(this.getPayCurrency()));return t},goToPayU:function(){var t=this;this.UX.isEmpty=!1,console.clear(),console.error("IS THE FINAL COUNTDOWN!!!");var i=this.BUY.shipping.address&&this.BUY.shipping.address.length>0&&this.BUY.shipping.info&&this.BUY.shipping.info.length>0&&this.BUY.shipping.neighbourhood&&this.BUY.shipping.neighbourhood.length>0&&this.BUY.shipping.department&&this.BUY.shipping.department.length>0&&this.BUY.shipping.city&&this.BUY.shipping.city.length>0&&this.BUY.shipping.phone&&this.BUY.shipping.phone.length>0&&this.BUY.shipping.cc&&this.BUY.shipping.cc.length>0&&this.BUY.shipping.phone!==this.BUY.shipping.cc&&this.BUY.shipping.name.length>1;if(console.log({r1:this.BUY.shipping.address&&this.BUY.shipping.address.length>0,r2:this.BUY.shipping.info&&this.BUY.shipping.info.length>0,r3:this.BUY.shipping.neighbourhood&&this.BUY.shipping.neighbourhood.length>0,r4:this.BUY.shipping.department&&this.BUY.shipping.department.length>0,r5:this.BUY.shipping.city&&this.BUY.shipping.city.length>0,r6:this.BUY.shipping.phone&&this.BUY.shipping.phone.length>0,r7:this.BUY.shipping.cc&&this.BUY.shipping.cc.length>0,r8:this.BUY.shipping.phone!==this.BUY.shipping.cc,r9:this.BUY.shipping.name.length>1,isOk:i}),i){this.BUY.shipping.country="COLOMBIA",this.BUY.billing.number="N/A",this.BUY.billing.cc=this.BUY.shipping.cc,this.BUY.billing.name=this.BUY.shipping.name?this.BUY.shipping.name:JSON.parse(localStorage.getItem("user")).displayName,this.BUY.billing.phone=this.BUY.shipping.phone,this.BUY.billing.email=this.BUY.shipping.email,this.BUY.products=[],this.BUY.products=this.items,this.BUY.products.map(function(i){var n=t.$store.state.shoppingCartModule.products.filter(function(t){return t.ref===i.ref});i["quantity"]=n.length,i["subtotal"]=i["quantity"]*Object(h["a"])(i)*(1-.01*i.discount)}),this.BUY.billing.subtotal_price=parseFloat(this.BUY.products.map(function(t){return t["subtotal"]}).reduce(function(t,i){return parseFloat(t+"")+parseFloat(i+"")})),this.BUY.billing.shipping_price=this.BUY.billing.subtotal_price>1e5?0:8e3,this.BUY.billing.total_price=this.BUY.billing.subtotal_price+this.BUY.billing.shipping_price,location.host;var n=a.a.firestore();n.collection("SHOPPING_HISTORY").doc(this.BUY.ID).set(this.BUY).then(function(){console.log("Document successfully written!"),t.$refs.payU_Form.submit()}).catch(function(t){alert("ERRROR EN LA BASE DE DATOS, CONTACTE AL ADMIN"),console.error("Error writing document: ",t)})}else console.clear(),console.error("this.BUY"),console.error(this.BUY)},getPrice:function(t){return Object(h["a"])(t)},isInputError:function(t){if("phone"==t){if(this.BUY.shipping["phone"]===this.BUY.shipping["cc"])return"error";if(this.BUY.shipping["phone"].length<7||this.BUY.shipping["phone"].length>15)return"error"}return"name"==t&&(this.BUY.shipping["name"].length<5||this.BUY.shipping["name"].split(" ").length<2)?"error":this.UX.isEmpty?"default":this.BUY.shipping[t]?"default":"error"},doToogleCard:function(){this.UX.isCardOpen=!this.UX.isCardOpen},addProductoToShoppingCart:function(){this.$store.dispatch("addToCart",this.item)},removeProductoToShoppingCart:function(){this.$store.dispatch("removeFromCart",this.item)},getPhotoSRC_HD:function(t){var i="18c776df-f5a7-45a0-9012-16f780381d92",n="".concat(t,"-01.jpg"),e="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos",s="alt=media&token=".concat(i),o="".concat(e,"%2Fhd%2F").concat(n,"?").concat(s);return o},getPhotoSRC_THUMB:function(t){var i="18c776df-f5a7-45a0-9012-16f780381d92",n="".concat(t,"-01.jpg"),e="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos",s="alt=media&token=".concat(i),o="".concat(e,"%2Fthumb%2F").concat(n,"?").concat(s);return o}},computed:{isDesktop:function(){var t=window.innerWidth;return t>600},getProductsInShoppingCart:function(){var t=this.$store.state.shoppingCartModule.products;return t},getTotalPriceByItem:function(){return this.BUY.meta.items=this.getProductsInShoppingCart.length,this.BUY.meta.total=this.getProductsInShoppingCart.map(function(t){return Object(h["a"])(t)*(1-.01*parseFloat(t.discount||0))}).reduce(function(t,i){return t+i}),this.BUY.meta.total},getTotalPriceByItemWithShipping:function(){return this.getTotalPriceByItem<1e5?this.getTotalPriceByItem+8e3:this.getTotalPriceByItem}}}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~9b489e7b"],{c526:function(e,t,r){"use strict";r.d(t,"a",function(){return i});r("96cf");var n=r("3b8d"),a=r("d225"),c=r("b0b4"),i=function(){function e(){Object(a["a"])(this,e)}return Object(c["a"])(e,[{key:"init",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(" .... Initing DB ");case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTitle",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=JSON.parse(""+sessionStorage.getItem("SETTINGS_LOCAL_DATABASE_TITLE"));e(r)}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSwiperSlides",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=JSON.parse(""+sessionStorage.getItem("SETTINGS_LOCAL_DATABASE_SWIPER"));e(r)}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getShopCategories",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=JSON.parse(""+sessionStorage.getItem("SETTINGS_LOCAL_DATABASE_SHOP_CATEGORIES"));e(r)}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthorizedDistributors",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=JSON.parse(""+sessionStorage.getItem("SETTINGS_LOCAL_DATABASE_AUTHORZIED_DISTRIBUTORS"));e(r)}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthorizedShops",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=JSON.parse(""+sessionStorage.getItem("SETTINGS_LOCAL_DATABASE_AUTHORZIED_SHOPS"));e(r)}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}]),e}()},c7e5:function(e,t,r){"use strict";r.d(t,"a",function(){return p});r("ac6a"),r("7514"),r("a481"),r("96cf");var n=r("3b8d"),a=r("d225"),c=r("b0b4"),i=r("59ca"),u=r.n(i),o=r("bc3a"),s=r.n(o),p=function(){function e(){Object(a["a"])(this,e),this.db=u.a.firestore(),this.db_collection="SETTINGS",this.db_docs={HOME_SETTINGS:{TITLE:"HOME_TITLE",SWIPER:"HOME_SWIPER",BANNERS:"HOME_BANNERS"},SHOP_SETTINGS:{CATEGORIES:"SHOP_CATEGORIES",GENDER:"SHOP_GENDER"},AUTHORIZED_DISTRIBUTORS_AND_SHOPS_SETTINGS:{DISTRIBUTORS:"AUTHORIZED_DISTRIBUTORS",SHOPS:"AUTHORIZED_SHOPS"}}}return Object(c["a"])(e,[{key:"init",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(" .... Initing DB ");case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTitle",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r,n){var a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a="HOME_SETTINGS",c=t.db.collection(t.db_collection),c.doc(a).get().then(function(e){if(e.exists){var a=e.data(),c=a[t.db_docs.HOME_SETTINGS.TITLE],i=c;r(i)}else n("No such document!")}).catch(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setTitle",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(n,a){var c,i,u,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c="HOME_SETTINGS",i=r.db.collection(r.db_collection),u=r.db_docs.HOME_SETTINGS.TITLE,o={},o[u]=t,i.doc(c).update(o).then(function(e){n(e)}).catch(function(e){a(e)});case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSwiperSlides",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r,n){var a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a="HOME_SETTINGS",c=t.db.collection(t.db_collection),c.doc(a).get().then(function(e){if(e.exists){var a=e.data(),c=a[t.db_docs.HOME_SETTINGS.SWIPER],i="string"===typeof c?JSON.parse(c+""):c,u=i;r(u)}else n("No such document!")}).catch(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setSwiperSlides",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(n,a){var c,i,u,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c="HOME_SETTINGS",i=r.db.collection(r.db_collection),u=r.db_docs.HOME_SETTINGS.SWIPER,o={},o[u]=JSON.stringify(t),i.doc(c).update(o).then(function(e){n(e)}).catch(function(e){a(e)});case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShopCategories",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r,n){var a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a="SHOP_SETTINGS",c=t.db.collection(t.db_collection),c.doc(a).get().then(function(e){if(e.exists){var a=e.data(),c=a[t.db_docs.SHOP_SETTINGS.CATEGORIES],i="string"===typeof c?JSON.parse(c+""):c,u=i;r(u)}else n("No such document!")}).catch(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setShopCategories",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(n,a){var c,i,u,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c="SHOP_SETTINGS",i=r.db.collection(r.db_collection),u=r.db_docs.SHOP_SETTINGS.CATEGORIES,o={},o[u]=JSON.stringify(t),i.doc(c).update(o).then(function(e){console.warn("shopCategories"),console.warn(t),n(e)}).catch(function(e){a(e)});case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAuthorizedDistributors",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r,n){var a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a="DISTRIBUTORS_AND_SHOPS",c=t.db.collection(t.db_collection),c.doc(a).get().then(function(e){if(e.exists){var a=e.data(),c=a[t.db_docs.AUTHORIZED_DISTRIBUTORS_AND_SHOPS_SETTINGS.DISTRIBUTORS],i="string"===typeof c?JSON.parse(c+""):c,u=i;r(u)}else n("No such document!")}).catch(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getLatLngFromAddress",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(n,c){var i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:"https://maps.googleapis.com/maps/api/geocode/json?","AIzaSyDIwlZ8kuzsE9T0_1OMhN6GoeQYXT7pvus",i=encodeURI("".concat(t,",").concat(r," ,").concat(a).replace("-"," - ")).replace("#","%23").replace("CR","Carrera").replace("CL","Calle"),u="https://maps.googleapis.com/maps/api/geocode/json?address="+i+"&key=AIzaSyDIwlZ8kuzsE9T0_1OMhN6GoeQYXT7pvus",s.a.get(u).then(function(e){if(e&&e.data)try{var t=e.data.results,r=t[0],a=r.geometry,c=a.location;n(c)}catch(i){n()}else n()}).catch(function(e){n()});case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getAuthorizedShops",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r,n){var a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a="DISTRIBUTORS_AND_SHOPS",c=t.db.collection(t.db_collection),c.doc(a).get().then(function(e){if(e.exists){var a=e.data(),c=a[t.db_docs.AUTHORIZED_DISTRIBUTORS_AND_SHOPS_SETTINGS.SHOPS],i="string"===typeof c?JSON.parse(c+""):c,u=i;r(u)}else n("No such document!")}).catch(function(e){n(e)});case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setAuthorizedShops",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a,c){var i,u,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i="DISTRIBUTORS_AND_SHOPS",u=r.db_docs.AUTHORIZED_DISTRIBUTORS_AND_SHOPS_SETTINGS.SHOPS,o=r.db.collection(r.db_collection),s={},r.getAuthorizedShops().then(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(p){var f,l,S,h,d,g,m,w,O;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:f=JSON.parse(JSON.stringify(p)+""),l=[],console.log(" (shopsOnDB: any)  "),f.map(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){var n,a,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t.find(function(e){return e.place===r["place"]}))+""),a=JSON.parse(JSON.stringify(r)+""),c=a["createdAt"]||new Date,i=a["updatedAt"]||new Date,n!==a?(n["updatedAt"]=new Date,n["createdAt"]=c):(n["updatedAt"]=i,n["createdAt"]=c),l.push(n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),console.warn(" ----------------------------- "),console.warn("a_distributorsOnDB"),console.warn(l),console.warn(" ----------------------------- "),S=[],h=[],d=0;case 11:if(!(d<l.length)){e.next=23;break}return g=l[d].address||l[d].place,m=l[d].city,w=l[d].department,e.next=17,r.getLatLngFromAddress(g,m,w);case 17:O=e.sent,O?(S.push({city:m,address:g,position:O}),l[d]["coord"]={lat:O.lat,lng:O.lng}):h.push({city:m,address:g}),console.log(d/l.length*100);case 20:d++,e.next=11;break;case 23:localStorage.setItem("okPosition_shop",JSON.stringify(S)),localStorage.setItem("noPosition_shop",JSON.stringify(h)),s[u]=JSON.stringify(l),o.doc(i).update(s).then(function(e){a(e)}).catch(function(e){c(e)});case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAuthorizedDistributors",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a,c){var i,u,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i="DISTRIBUTORS_AND_SHOPS",u=r.db_docs.AUTHORIZED_DISTRIBUTORS_AND_SHOPS_SETTINGS.DISTRIBUTORS,o=r.db.collection(r.db_collection),s={},r.getAuthorizedDistributors().then(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(n){var p,f,l,S,h,d,g,m,w;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:p=JSON.parse(JSON.stringify(n)+""),f=JSON.parse(JSON.stringify(t)+""),l=[],S=[],h=[],d=regeneratorRuntime.mark(function e(t){var n,a,c,i,u,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=f[t],a=p.find(function(e){return e.code.replace(/\s/g,"")==n.code.replace(/\s/g,"")}),c=n.address,i=n.city,u=n.department,e.next=7,r.getLatLngFromAddress(c,i,u);case 7:o=e.sent,n["position"]=o||{},a?(n["updatedAt"]=new Date,S.push(n)):(n["createdAt"]=new Date,l.push(n));case 10:case"end":return e.stop()}},e)}),g=0;case 7:if(!(g<f.length)){e.next=12;break}return e.delegateYield(d(g),"t0",9);case 9:g++,e.next=7;break;case 12:p.map(function(e,t){var r=e,n=f.find(function(e){return e.code.replace(/\s/g,"")==r.code.replace(/\s/g,"")});n||h.push(r)}),m=[].concat(l,S),w=JSON.stringify(m),s[u]=w,o.doc(i).update(s).then(function(e){a(e)}).catch(function(e){c(e)});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}()}}]);
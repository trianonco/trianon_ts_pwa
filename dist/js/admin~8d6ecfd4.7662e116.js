(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~8d6ecfd4"],{2067:function(t,e,a){"use strict";var i=a("42e6"),n=a.n(i);n.a},"42e6":function(t,e,a){},f573:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"admin page title"},[i("h1",[t._v("DESPACHOS")]),i("form",t._l(t.queueSorted,function(e,n){return i("div",{key:n,staticStyle:{display:"inline-block",width:"fit-content","vertical-align":"top"}},[e.ID&&t.isOnDate(e)?i("div",{staticClass:"queue-card"},[i("div",{staticClass:"queue-card-header",staticStyle:{"text-align":"left"}},[i("span",{staticStyle:{"font-weight":"900"}},[t._v(t._s(e.products[0].ref)+"  "+t._s(t.isOnDate(e))+"/")]),i("br"),i("span",{staticStyle:{"font-weight":"100","font-size":"0.7em"}},[t._v(t._s(e.ID))])]),i("center",[i("v-lazy-image",{attrs:{src:t.getPhotoURL(e.products[0].ref)[1],"src-placeholder":t.getPhotoURL(e.products[0].ref)[0]}})],1),i("div",{staticClass:"queue-card-preview"},[i("div",{staticClass:"queue-card-preview-col"},[i("h1",{staticClass:"title"},[i("strong",[t._v("Fecha de Compra")]),t._v("\n              : "+t._s(t.getDate(e.meta.createdAt))+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Producto")]),t._v("\n              : "+t._s(e.products[0].ref)+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Email")]),t._v("\n              : "+t._s(e.shipping.email)+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Teléfono")]),t._v("\n              : "+t._s(e.shipping.phone)+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Dirección")]),t._v("\n              : "+t._s(e.shipping.address)+" "+t._s(e.shipping.info)+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Barrio")]),t._v("\n              : "+t._s(e.shipping.neighbourhood)+"\n            ")]),i("h1",{staticClass:"title"},[i("strong",[t._v("Municipio")]),t._v("\n              : "+t._s(e.shipping.city)+" , "+t._s(e.shipping.department)+"\n            ")])])]),i("div",{staticClass:"queue-card-comment"},[t._v(t._s(e.comment))]),i("a",{attrs:{href:t.getInvoiceURL(e.ID),target:"_blank"}},[i("div",{staticClass:"queue-card-invoice-button"},[t._v("VER INFORMACIÓN DE PEDIDO")])]),i("div",{staticClass:"queue-card-shipping-info"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.billing.number,expression:"item.billing.number"}],attrs:{type:"text",placeholder:"Numero de Factura"},domProps:{value:e.billing.number},on:{input:function(a){a.target.composing||t.$set(e.billing,"number",a.target.value)}}}),i("select",{directives:[{name:"model",rawName:"v-model",value:e.shipping.shipping_company,expression:"item.shipping.shipping_company"}],on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e.shipping,"shipping_company",a.target.multiple?i:i[0])}}},t._l(t.ShippingCompanies,function(e,a){return i("option",{key:a,domProps:{value:e.name}},[t._v(t._s(e.name))])}),0),i("input",{directives:[{name:"model",rawName:"v-model",value:e.shipping.tracker_code,expression:"item.shipping.tracker_code"}],attrs:{type:"text",placeholder:"Codigo de Guia"},domProps:{value:e.shipping.tracker_code},on:{input:function(a){a.target.composing||t.$set(e.shipping,"tracker_code",a.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.shipping.delivery_date,expression:"item.shipping.delivery_date"}],attrs:{type:"date",placeholder:"Fecha de entrega"},domProps:{value:e.shipping.delivery_date},on:{input:function(a){a.target.composing||t.$set(e.shipping,"delivery_date",a.target.value)}}})]),i("div",{staticClass:"queue-card-row states"},[i("div",{staticClass:"state",on:{click:function(a){return t.setState(e,"IN PROCESS: IN FACTORY")}}},[i("div",{staticClass:"state-inStock-icon"},[t.isStateInStock(e)?i("img",{attrs:{src:a("db39")}}):t._e(),t.isStateInStock(e)?t._e():i("img",{attrs:{src:a("b654")}})]),i("div",{staticClass:"state-label"},[t._v("EN FABRICA")])]),i("div",{staticClass:"state",on:{click:function(a){return t.setState(e,"IN PROCESS: IN SHIPPING")}}},[i("div",{staticClass:"state-inDispatches"},[t.isStateInShipping(e)?i("img",{attrs:{src:a("086d")}}):t._e(),t.isStateInShipping(e)?t._e():i("img",{attrs:{src:a("9228")}})]),i("div",{staticClass:"state-label"},[t._v("ENVIADO")])]),i("div",{staticClass:"state",on:{click:function(a){return t.setState(e,"IN PROCESS: IN DELIVERED")}}},[i("div",{staticClass:"state-inShipping"},[t.isStateInDelivered(e)?i("img",{attrs:{src:a("4c34")}}):t._e(),t.isStateInDelivered(e)?t._e():i("img",{attrs:{src:a("f3fe")}})]),i("div",{staticClass:"state-label"},[t._v("RECIBIDO")])])]),i("div",{staticClass:"queue-card-save-button",on:{click:function(a){return t.save(e)}}},[t._v("GUARDAR")]),i("div",{staticClass:"queue-card-row"})],1):t._e()])}),0),t.isLoading?i("div",{staticClass:"loader"},[i("img",{attrs:{src:a("b2fa"),width:"25px"}})]):t._e()])},n=[],s=(a("55dd"),a("7f7f"),a("6762"),a("2fdb"),a("a481"),a("ac6a"),a("d225")),o=a("b0b4"),c=a("308d"),r=a("6bb5"),l=a("4e2b"),p=a("9ab4"),u=a("8dc2"),d=a.n(u),v=a("185b"),g=a("59ca"),h=a.n(g),m=a("60a3"),I=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.DATA={title:""},t.isLoading=!1,t.apiDB=new v["a"],t.db={},t.queue=[],t.ShippingCompanies=[{name:"TCC",url:"https://www.tcc.com.co/logistica/servicios-on-line/rastrear-envios/"},{name:"INTERRAPIDISIMO",url:"https://www.interrapidisimo.com/sigue-tu-envio/"},{name:"SERVIENTREGA",url:" SERVIENTRGA.COM"},{name:"DHL",url:"http://www.dhl.com.co/es/express/rastreo.html"},{name:"FEDEX",url:"https://www.fedex.com/es-co/tracking.html"},{name:"DEPRISA",url:"https://www.deprisa.com/"},{name:"COORDINADORA",url:"https://www.coordinadora.com/portafolio-de-servicios/servicios-en-linea/rastrear-guias/"},{name:"VELOTAX",url:"https://www.velotax.com.co/mensajeria"},{name:"4/72",url:"http://www.4-72.com.co/"}],t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"beforeMount",value:function(){var t=this,e=h.a.firestore();this.queue=[],e.collection("SHOPPING_HISTORY").get().then(function(e){e.forEach(function(e){var a=e.data();a.shipping.delivery_date=t.formatDate(a.shipping.delivery_date),t.queue.push(a)})})}},{key:"isOnDate",value:function(t){var e=!0;try{var a=864e5,i=t.meta.updatedAt.toDate(),n=new Date,s=Math.round(Math.abs((n.getTime()-i.getTime())/a));"IN PROCESS: IN DELIVERED"===t.state&&(e=!(s>15)),"IN PROCESS: WATING FOR PAYMENT"===t.state&&(e=!1)}catch(o){console.error(o)}return e}},{key:"getDate",value:function(t){var e=new Date(t.toDate()),a=e,i=a.getUTCMonth()+1,n=a.getUTCDate(),s=a.getUTCFullYear(),o=n+"/"+i+"/"+s;return o}},{key:"formatDate",value:function(t){var e,a,i,n;try{e=t.toDate(),a=""+(e.getMonth()+1),i=""+e.getDate(),n=e.getFullYear()}catch(s){e=new Date,a=""+(e.getMonth()+1),i=""+e.getDate(),n=e.getFullYear()}return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[n,a,i].join("-")}},{key:"getInvoiceURL",value:function(t){return"https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-InVoices%2F".concat(t,".pdf?alt=media&token=f0f2ab54-4e49-4d22-9e79-ab18233e4af7")}},{key:"getPhotoURL",value:function(t){var e=t.replace(" ",""),a="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos%2Fhd%2F".concat(e,"-01.jpg?alt=media&token=c392cfe1-c92e-4bb8-97f1-cf815a641f01"),i="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos%2Fthumb%2F".concat(e,"-01.jpg?alt=media&token=c392cfe1-c92e-4bb8-97f1-cf815a641f01");return[i,a]}},{key:"save",value:function(t){var e=this;if(t.state.includes("IN PROCESS: IN FACTORY")){this.isLoading=!0;var a=JSON.parse(""+JSON.stringify(t)),i="https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInStock?ID=".concat(a.ID);this.$http.get(i).then(function(t){e.isLoading=!1,console.warn(t)}).catch(function(t){console.error(t)})}if(t.state.includes("IN PROCESS: IN SHIPPING")){var n=JSON.parse(""+JSON.stringify(t)),s=n.shipping.shipping_company,o=this.ShippingCompanies.filter(function(t){return t.name===s})[0].url;n.shipping.tracker_link=o;var c=new Date(n.shipping.delivery_date.replace("-","/")).getTime();n.shipping.delivery_date=c,this.isLoading=!0;var r="https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInShipping?ID=".concat(n.ID,"&BILLING_NUMBER=").concat(n.billing.number,"&SHIPPING_COMPANY=").concat(n.shipping.shipping_company,"&SHIPPING_DELIVERY_DATE=").concat(n.shipping.delivery_date,"&SHIPPING_TRACKER_CODE=").concat(n.shipping.tracker_code,"&SHIPPING_TRACKER_LINK=").concat(encodeURIComponent(n.shipping.tracker_link),"&");this.$http.get(r).then(function(t){e.isLoading=!1,console.warn(t)}).catch(function(t){console.error(t)})}if(t.state.includes("IN PROCESS: IN DELIVERED")){this.isLoading=!0;var l=JSON.parse(""+JSON.stringify(t)),p="https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInDelivered?ID=".concat(l.ID);this.$http.get(p).then(function(t){e.isLoading=!1,console.warn(t)}).catch(function(t){console.error(t)})}}},{key:"isStateInStock",value:function(t){return t.state.includes("IN PROCESS: IN FACTORY")||t.state.includes("IN PROCESS: IN SHIPPING")||t.state.includes("IN PROCESS: IN DELIVERED")}},{key:"isStateInShipping",value:function(t){return t.state.includes("IN PROCESS: IN SHIPPING")||t.state.includes("IN PROCESS: IN DELIVERED")}},{key:"isStateInDelivered",value:function(t){return t.state.includes("IN PROCESS: IN DELIVERED")}},{key:"setState",value:function(t,e){t.state.includes(e)?(t.state.includes("IN PROCESS: IN FACTORY")&&(t.state="IN PROCESS: PAYMENT SUCCESSFULL"),t.state.includes("IN PROCESS: IN SHIPPING")&&(t.state="IN PROCESS: IN FACTORY"),t.state.includes("IN PROCESS: IN DELIVERED")&&(t.state="IN PROCESS: IN SHIPPING")):t.state=e,console.log(t.state)}},{key:"clear",value:function(){this.DATA.title=""}},{key:"queueSorted",get:function(){var t=this.queue.sort(function(t,e){return e.meta.createdAt.seconds-t.meta.createdAt.seconds});return t}}]),e}(m["c"]);I=p["__decorate"]([Object(m["a"])({components:{VLazyImage:d.a},name:"AdminDispatchesPageComponent"})],I);var S=I,f=S,_=(a("2067"),a("2877")),C=Object(_["a"])(f,i,n,!1,null,"38226e79",null);e["a"]=C.exports}}]);
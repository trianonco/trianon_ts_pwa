(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~a57e773e"],{"05b5":function(e,t,o){},"35e2":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"admin page orders"},[o("div",{staticClass:"wrapper"},[o("h1",[e._v("ORDENES DE COMPRA")]),o("div",{staticClass:"orders"},[o("vue-good-table",{attrs:{"search-options":{enabled:!0},"select-options":{enabled:!1},columns:e.columns,rows:e.queue},on:{"on-selected-rows-change":e.selectionChanged}},[o("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[o("button",{staticStyle:{display:"block"},on:{click:function(t){return e.downloadInvoices()}}},[e._v(" Descargar InVoices ")])]),o("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[o("button",{staticStyle:{display:"block"},on:{click:function(t){return e.deleteOrder()}}},[e._v(" Borrar ")])])])],1)])])},n=[],c=(o("a481"),o("ac6a"),o("d225")),r=o("b0b4"),i=o("308d"),s=o("6bb5"),l=o("4e2b"),d=o("9ab4"),p=(o("dac4"),o("f617")),u=o("60a3"),f=o("185b"),b=o("59ca"),m=o.n(b),h=function(e){return"\n\n    const api = 'https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInBuy?ID=".concat(e,"';\n\n    fetch(api)\n    .then(function(response) {\n      const res = JSON.stringify(response.json());\n      location.reload();\n    })\n    .catch(function(error) {\n      window.alert('ERROR')\n    });\n    \n  \n")},v=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(i["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.apiDB=new f["a"],e.db={},e.inVoices=[],e.queue=[],e.orders=[],e.ORDER_STATE="IN PROCESS: PAYMENT SUCCESSFULL",e.columns=[{label:"Pago",field:"payment",html:!0},{label:"Fecha Compra",field:"createdAt",type:"date",dateInputFormat:"dd-MM-yyyy",dateOutputFormat:"dd/MM/yyyy"},{label:"Ref",field:"ref"},{label:"Email",field:"email",type:"string"},{label:"Telef√≥no",field:"phone",type:"string"},{label:"Precio",field:"price",type:"string"},{label:"Producto",field:"product",type:"string"},{label:"Foto",field:"photo",html:!0},{label:"InVoice",field:"invoice",html:!0},{label:"Delete",field:"delete",html:!0}],e.rows=[{ref:"REF_OERFEF_eRF",email:"wallamejorge@hotmail.com",phone:"300531837",price:"0.00",product:"BOTAS NEGRAS",photo:'<img style="width:50px" src="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos%2Fhd%2FHR156-01-01.jpg?alt=media&token=c392cfe1-c92e-4bb8-97f1-cf815a641f01">',invoice:'<a href="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-InVoices%2F07f3518fcbc0d26abd6ec782d01a827b.pdf?alt=media&token=f0f2ab54-4e49-4d22-9e79-ab18233e4af7" download="w3logo"> DESCARGAR </a>',delete:'<a href="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-InVoices%2F07f3518fcbc0d26abd6ec782d01a827b.pdf?alt=media&token=f0f2ab54-4e49-4d22-9e79-ab18233e4af7" download="w3logo"> BORRAR </a>'}],e}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"beforeMount",value:function(){var e=this,t=m.a.firestore();this.queue=[],t.collection("SHOPPING_HISTORY").get().then(function(t){t.forEach(function(t){var o=t.data(),a=o.meta.createdAt.toDate(),n=a.getDate(),c=a.getMonth()+1,r=a.getFullYear();a=c<10?"".concat(n,"-0").concat(c,"-").concat(r):"".concat(n,"-").concat(c,"-").concat(r);var i=o.products.map(function(e){return e.ref}).reduce(function(e,t){return e+" "+t},""),s=o.products.map(function(e){return e.ref_photo_code}).reduce(function(e,t){return" <br> "+'<img style="width:50px" src="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos%2Fhd%2F'.concat(decodeURI(t).replace(" ",""),'-01.jpg?alt=media&token=c392cfe1-c92e-4bb8-97f1-cf815a641f01">')+e+" <br> "},""),l=o.products.map(function(e){return e.description}).reduce(function(e,t){return e+" "+t}),d={id:o.id,ref:i,email:o.shipping.email,phone:o.shipping.phone,price:e.toCurrent(o.meta.total),product:l,createdAt:a,payment:"\n\n                      ".concat("IN PROCESS: WATING FOR PAYMENT"===o.state?'<div class="payment-button" onclick="'+h(o.ID)+'">CONFIRMAR</div>':"","\n                      ").concat("IN PROCESS: WATING FOR PAYMENT"!==o.state?'<div class="payment-label">PAGO CONFIRMADO</div>':"","\n                      \n                "),photo:s,delete:"<a></a>",invoice:'<a href="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-InVoices%2F'.concat(o.ID,'.pdf?alt=media&token=f0f2ab54-4e49-4d22-9e79-ab18233e4af7" download="').concat(o.ID,'" target="_blank"> DESCARGAR </a>')};"IN PROCESS: PAYMENT SUCCESSFULL"!==o.state&&"IN PROCESS: IN FACTORY"!==o.state&&"IN PROCESS: WATING FOR PAYMENT"!==o.state||(e.queue.push(d),console.warn({doc_data:o,doc_queue:d})),e.orders.push(o)})})}},{key:"mount",value:function(){}},{key:"selectionChanged",value:function(e){var t=e.selectedRows;console.error(t);var o=t.map(function(e){return e.invoice.replace('<a href="',"").replace('" download="w3logo"> DESCARGAR </a>')});console.warn(""),console.warn(o),this.inVoices=o}},{key:"downloadInvoices",value:function(){this.inVoices}},{key:"download_file",value:function(e,t){var o=document.createElement("a");o.href=e,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},{key:"toCurrent",value:function(e){if("number"!==typeof e)return e;var t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0});return t.format(e)}}]),t}(u["c"]);v=d["__decorate"]([Object(u["a"])({components:{VueGoodTable:p["a"]},name:"AdminOrdersPageComponent"})],v);var g=v,w=g,y=(o("e714"),o("2877")),R=Object(y["a"])(w,a,n,!1,null,null,null);t["a"]=R.exports},e714:function(e,t,o){"use strict";var a=o("05b5"),n=o.n(a);n.a}}]);
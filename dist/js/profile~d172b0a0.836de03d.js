(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile~d172b0a0"],{"08a4":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item&&t.item.description&&t.item.ref?n("div",{staticClass:"card"},[n("div",{staticClass:"card-header",on:{click:function(e){return t.doToogleCard()}}},[n("div",{staticClass:"card-header-bullet"},[t.UX.isCardOpen?t._e():n("img",{attrs:{alt:"TrianonCo Image",src:i("8cf8")}}),t.UX.isCardOpen?n("img",{attrs:{alt:"TrianonCo Image",src:i("1765")}}):t._e()]),t.item&&t.item.description&&t.item.ref?n("div",{staticClass:"card-header-title"},[n("h1",[t._v(t._s(t.item.description)+" "+t._s(t.item.ref))])]):t._e(),n("div",{staticClass:"card-header-see-more"},[t.UX.isCardOpen?t._e():n("span",[t._v("VER")])]),t.UX.isCardOpen?n("img",{staticClass:"card-header-triangle",attrs:{src:i("3282")}}):t._e()]),t.UX.isCardOpen?n("div",{staticClass:"card-content"},[n("div",{staticClass:"card-content-title"},[n("h1",[t._v("ESTADO : PROCESO DE COMPRA")]),n("h2",[t._v("PRECIO : "+t._s(t._f("toCurrency")(t.item.price_cop)))])]),n("div",{staticClass:"cols"},[n("div",{staticClass:"col"},[n("div",{staticClass:"card-content-wrapper"},[n("v-lazy-image",{staticClass:"card-content-wrapper-photo",attrs:{src:t.getPhotoSRC_HD(t.item.ref_photo_code),"src-placeholder":t.getPhotoSRC_THUMB(t.item.ref_photo_code)}})],1),n("div",{staticClass:"card-content-quantity"},[n("div",{staticClass:"card-content-quantity-remove",on:{click:function(e){return t.removeProductoToShoppingCart()}}},[n("span",[t._v("-")])]),n("div",{staticClass:"card-content-quantity-number"},[n("span",[t._v("\n                CANTIDAD: \n                \n              "+t._s(t.getProductsInShoppingCart.filter(function(e){return e&&e.ref_photo_code===t.item.ref_photo_code}).length)+"\n\n              ")])]),n("div",{staticClass:"card-content-quantity-add",on:{click:function(e){return t.addProductoToShoppingCart()}}},[n("span",[t._v("+")])])]),t.isLast?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.BUY.comment,expression:"BUY.comment"}],staticClass:"comment-area",attrs:{placeholder:"COMENTARIOS ADICIONALES"},domProps:{value:t.BUY.comment},on:{input:function(e){e.target.composing||t.$set(t.BUY,"comment",e.target.value)}}}):t._e()]),n("div",{staticClass:"col"},[!t.isLast&&t.isDesktop?n("div",{staticStyle:{height:"500px",display:"flex","-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column","-webkit-flex-wrap":"wrap","-ms-flex-wrap":"wrap","flex-wrap":"wrap","-webkit-justify-content":"center","-ms-flex-pack":"center","justify-content":"center","-webkit-align-content":"center","-ms-flex-line-pack":"center","align-content":"center","-webkit-align-items":"center","-ms-flex-align":"center","align-items":"center"}},[n("h1",[t._v("¡COMPRARÁS MÁS DE UN PRODUCTO!")]),n("hr",{staticStyle:{"margin-bottom":"23px",width:"80%",display:"block","margin-top":"23px"}}),n("h2",{staticStyle:{width:"100%","letter-spacing":"1px","line-height":"1.5em","font-size":"13px",padding:"1em","box-sizing":"border-box","padding-top":"0px"}},[t._v(" \n                PODRÁS AÑADIR LA INFORMACIÓN DE ENVIÓ Y REALIZAR TU PAGO EN LA PARTE INFERIOR\n            ")]),n("img",{staticStyle:{width:"5em"},attrs:{src:i("a880")}})]):t._e(),t.isLast?n("form",[n("div",{staticClass:"card-content-shipping-info"},[n("h1",[t._v("INFORMACIÓN DE ENVIO")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.address,expression:"BUY.shipping.address"}],class:t.isInputError("address"),attrs:{type:"text",name:"address",autocomplete:"on",placeholder:"DIRECCIÓN",required:""},domProps:{value:t.BUY.shipping.address},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"address",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.info,expression:"BUY.shipping.info"}],class:t.isInputError("info"),attrs:{type:"text",name:"apartment",autocomplete:"on",placeholder:"PISO O APARTAMENTO",required:""},domProps:{value:t.BUY.shipping.info},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"info",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.neighbourhood,expression:"BUY.shipping.neighbourhood"}],class:t.isInputError("neighbourhood"),attrs:{type:"text",name:"neighbourhood",autocomplete:"on",placeholder:"BARRIO",required:""},domProps:{value:t.BUY.shipping.neighbourhood},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"neighbourhood",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.department,expression:"BUY.shipping.department"}],class:t.isInputError("department"),staticStyle:{width:"calc(50% - 0.5em)","margin-right":"1em","margin-bottom":"0px"},attrs:{type:"text",autocomplete:"on",placeholder:"DEPARTAMENTO",required:""},domProps:{value:t.BUY.shipping.department},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"department",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.city,expression:"BUY.shipping.city"}],class:t.isInputError("city"),staticStyle:{width:"calc(50% - 0.5em)","margin-bottom":"0px"},attrs:{type:"text",autocomplete:"on",placeholder:"MUNICIPIO",required:""},domProps:{value:t.BUY.shipping.city},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"city",e.target.value)}}}),n("span",[t._v("EN CASO DE QUE OTRA PERSONA RECIBA TU PRODUCTO:")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.name,expression:"BUY.shipping.name"}],staticStyle:{"margin-top":"1em"},attrs:{type:"text",autocomplete:"on",placeholder:"NOMBRE DE QUIEN VA A RECIBIR",required:""},domProps:{value:t.BUY.shipping.name},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"name",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.cc,expression:"BUY.shipping.cc"}],class:t.isInputError("cc"),staticStyle:{"margin-top":"1em"},attrs:{type:"text",autocomplete:"on",placeholder:"ID/ CEDULA DE CIUDADANÍA/ NIT",required:""},domProps:{value:t.BUY.shipping.cc},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"cc",e.target.value)}}})]),n("div",{staticClass:"card-content-phone-and-total"},[n("div",{staticClass:"card-content-phone"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.BUY.shipping.phone,expression:"BUY.shipping.phone"}],class:t.isInputError("phone"),attrs:{type:"text",placeholder:"TU NUMERO CELULAR *",required:""},domProps:{value:t.BUY.shipping.phone},on:{input:function(e){e.target.composing||t.$set(t.BUY.shipping,"phone",e.target.value)}}})]),n("div",{staticClass:"card-content-total-sum"},[n("h3",[t._v("SUMA TOTAL DE TU COMPRA:")]),n("h1",[t._v(t._s(t._f("toCurrency")(t.getTotalPriceByItem)))])]),t.getTotalPriceByItem>1e5?n("div",{staticClass:"card-content-if-free-shipping"},[n("h4",[t._v("TU COMPRA SUPERA LOS $100.000 COP")]),n("h3",[t._v("ASÍ QUE EL ENVÍO ES GRATIS")])]):t._e()])]):t._e(),t.isLast?n("div",{staticClass:"card-content-payment"},[n("h1",[t._v("SELECCIONA UN METODO DE PAGO:")]),n("form",{ref:"payU_Form",attrs:{method:"post",action:t.PAYU.url}},[n("img",{staticClass:"credit-cards-mobile",attrs:{src:i("6b2e"),width:"100%"},on:{click:function(e){return t.goToPayU()}}}),n("img",{staticClass:"credit-cards-desktop",attrs:{src:i("b110"),width:"100%"},on:{click:function(e){return t.goToPayU()}}}),n("input",{attrs:{name:"merchantId",type:"hidden"},domProps:{value:t.getPayMerchantID()}}),n("input",{attrs:{name:"accountId",type:"hidden"},domProps:{value:t.getPayAccountID()}}),n("input",{attrs:{name:"referenceCode",type:"hidden"},domProps:{value:t.getPayReferenceCode()}}),n("input",{attrs:{name:"description",type:"hidden"},domProps:{value:t.getPayDescription()}}),n("input",{attrs:{name:"amount",type:"hidden"},domProps:{value:t.getPayAmount()}}),n("input",{attrs:{name:"tax",type:"hidden"},domProps:{value:t.getPayTax()}}),n("input",{attrs:{name:"taxReturnBase",type:"hidden"},domProps:{value:t.getPayTaxReturnBase()}}),n("input",{attrs:{name:"currency",type:"hidden"},domProps:{value:t.getPayCurrency()}}),n("input",{attrs:{name:"signature",type:"hidden"},domProps:{value:t.getPaySignature()}}),n("input",{attrs:{name:"buyerEmail",type:"hidden"},domProps:{value:t.getPayClientEmail()}}),n("input",{attrs:{name:"shippingAddress",type:"hidden"},domProps:{value:t.getPayShippingAddress()}}),n("input",{attrs:{name:"shippingCity",type:"hidden"},domProps:{value:t.getPayShippingCity()}}),n("input",{attrs:{name:"shippingCountry",type:"hidden",value:"CO"}}),t.PAYU===t.PAYU_OPTIONS["TEST"]?n("input",{attrs:{name:"test",type:"hidden",value:"1"}}):t._e(),n("input",{attrs:{name:"responseUrl",type:"hidden"},domProps:{value:t.getPayUpdateURL()}}),n("input",{attrs:{name:"confirmationUrl",type:"hidden"},domProps:{value:t.getPayConfirmationURL()}}),n("input",{attrs:{name:"Submit",type:"hidden",value:"Enviar"}})])]):t._e()])])]):t._e()]):t._e()},a=[],o=(i("7f7f"),i("8dc2")),s=i.n(o),r=i("59ca"),p=i.n(r),c=i("6821f"),d={name:"CardShoppingCartItemComponent",components:{VLazyImage:s.a},data:function(){return{UX:{isCardOpen:!1,isEmpty:!0},PAYU_OPTIONS:{TEST:{url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"4Vj8eK4rloUd272L48hsrarnUA",accountId:"512321",merchantId:"508029"},JORGE_MAYORGA:{url:"https://checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"4bk50ANMJ03RzWeFPVZ4Ca8Tnx",accountId:"672018",merchantId:"669392"},TRIANON:{url:"https://checkout.payulatam.com/ppp-web-gateway-payu",apiKey:"0t4jk46T6YA78S2dios6WQBSbP",accountId:"544845",merchantId:"542713"}},PAYU:{},BUY:{ID:"",state:"IN PROCESS: WATING FOR PAYMENT",email:"",meta:{items:0,total:0,createdAt:new Date,updatedAt:new Date},shipping:{address:"",info:"",neighbourhood:"",department:"",city:"",country:"",name:"",phone:"",email:"",tracker_code:"",tracker_link:"",shipping_company:"",delivery_date:""},billing:{number:"",subtotal_price:"",total_price:"",shipping_price:"",name:"",cc:"",phone:"",email:""},comment:"",products:[]}}},props:["items","item","isLast"],mounted:function(){console.clear(),console.warn(""),console.warn(" ------------------------------------------- "),console.warn(" Proceso de Compra Trianon PWA "),console.warn(" ------------------------------------------ "),console.warn("");var t="TRIANON",e=this.PAYU_OPTIONS[t];this.PAYU=e,console.warn({PAYU_SETTINGS:this.PAYU}),"JORGE_MAYORGA"===t&&(this.BUY.shipping.address="Calle 141 #7b - 86",this.BUY.shipping.info="Apto 502",this.BUY.shipping.neighbourhood="Belmira",this.BUY.shipping.department="Bogota",this.BUY.shipping.city="Bogota",this.BUY.shipping.name="Jorge L. Mayorga",this.BUY.shipping.phone="3005318387"),"TEST"===t&&(this.BUY.shipping.address="Calle Av Siempre Viva #70c - 86",this.BUY.shipping.info="Casa 124",this.BUY.shipping.neighbourhood="La Soledad",this.BUY.shipping.department="Bogota",this.BUY.shipping.city="Bogota",this.BUY.shipping.name="Jorge L. Mayorga",this.BUY.shipping.phone="3005318387");var i=new Date,n=JSON.stringify(navigator.userAgent);this.BUY.shipping.email=JSON.parse(localStorage.getItem("user")).email,this.BUY.email=this.BUY.shipping.email,this.BUY.ID=c(i+n+Math.random()+this.item.ref),console.warn({md5:this.getPaySignature(),apiKey:this.PAYU.apiKey,merchandId:this.getPayMerchantID(),referenceCode:this.getPayReferenceCode(),amount:this.getPayAmount(),currency:this.getPayCurrency()})},methods:{getPayMerchantID:function(){return this.PAYU.merchantId},getPayAccountID:function(){return this.PAYU.accountId},getPayReferenceCode:function(){return this.BUY.ID},getPayConfirmationURL:function(){return this.PAYU.confirmationURL},getPayShippingAddress:function(){return"".concat(this.BUY.shipping.address," ").concat(this.BUY.shipping.info)},getPayShippingCity:function(){return"".concat(this.BUY.shipping.department," ").concat(this.BUY.shipping.city)},getPayClientEmail:function(){return this.BUY.shipping.email},getPayUpdateURL:function(){var t="https://us-central1-trianon-co-pwa-dev.cloudfunctions.net/HandleUpdateInBuy?ID="+this.BUY.ID;return t},getPayCurrency:function(){return"COP"},getPayTaxReturnBase:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){var t=12e3;return(.81*t).toFixed(2)}var e=parseFloat(this.BUY.billing.total_price);return(.81*e).toFixed(2)},getPayTax:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){var t=12e3;return(.19*t).toFixed(2)}var e=parseFloat(this.BUY.billing.total_price);return(.19*e).toFixed(2)},getPayAmount:function(){if(this.PAYU===this.PAYU_OPTIONS["JORGE_MAYORGA"]){var t=12e3;return t.toFixed(2)}var e=parseFloat(this.BUY.billing.total_price);return e.toFixed(2)},getPayDescription:function(){return"".concat(this.item.description," ").concat(this.item.line," COLOR : ").concat(this.item.color," REF ").concat(this.item.ref," ")},getPaySignature:function(){var t=c("".concat(this.PAYU.apiKey,"~").concat(this.PAYU.merchantId,"~").concat(this.getPayReferenceCode(),"~").concat(this.getPayAmount(),"~").concat(this.getPayCurrency()));return t},goToPayU:function(){var t=this;if(this.UX.isEmpty=!1,console.clear(),console.error("IS THE FINAL COUNTDOWN!!!"),this.BUY.shipping.address&&this.BUY.shipping.info&&this.BUY.shipping.neighbourhood&&this.BUY.shipping.department&&this.BUY.shipping.city&&this.BUY.shipping.phone&&this.BUY.shipping.cc){this.BUY.shipping.country="COLOMBIA",this.BUY.billing.number="N/A",this.BUY.billing.cc=this.BUY.shipping.cc,this.BUY.billing.name=this.BUY.shipping.name?this.BUY.shipping.name:JSON.parse(localStorage.getItem("user")).displayName,this.BUY.billing.phone=this.BUY.shipping.phone,this.BUY.billing.email=this.BUY.shipping.email,this.BUY.products=[],this.BUY.products=this.items,this.BUY.products.map(function(e){var i=t.$store.state.shoppingCartModule.products.filter(function(t){return t.ref===e.ref});e["quantity"]=i.length,e["subtotal"]=e["quantity"]*e.price_cop}),this.BUY.billing.subtotal_price=parseFloat(this.BUY.products.map(function(t){return t["subtotal"]}).reduce(function(t,e){return parseFloat(t+"")+parseFloat(e+"")})),this.BUY.billing.shipping_price=this.BUY.billing.subtotal_price>1e5?0:8e3,this.BUY.billing.total_price=this.BUY.billing.subtotal_price+this.BUY.billing.shipping_price,location.host;var e=p.a.firestore();e.collection("SHOPPING_HISTORY").doc(this.BUY.ID).set(this.BUY).then(function(){console.log("Document successfully written!"),t.$refs.payU_Form.submit()}).catch(function(t){alert("ERRROR EN LA BASE DE DATOS, CONTACTE AL ADMIN"),console.error("Error writing document: ",t)})}},isInputError:function(t){return this.UX.isEmpty?"default":this.BUY.shipping[t]?"default":"error"},doToogleCard:function(){this.UX.isCardOpen=!this.UX.isCardOpen},addProductoToShoppingCart:function(){this.$store.dispatch("addToCart",this.item)},removeProductoToShoppingCart:function(){this.$store.dispatch("removeFromCart",this.item)},getPhotoSRC_HD:function(t){var e="18c776df-f5a7-45a0-9012-16f780381d92",i="".concat(t,"-01.jpg"),n="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos",a="alt=media&token=".concat(e),o="".concat(n,"%2Fhd%2F").concat(i,"?").concat(a);return o},getPhotoSRC_THUMB:function(t){var e="18c776df-f5a7-45a0-9012-16f780381d92",i="".concat(t,"-01.jpg"),n="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos",a="alt=media&token=".concat(e),o="".concat(n,"%2Fthumb%2F").concat(i,"?").concat(a);return o}},computed:{isDesktop:function(){var t=window.innerWidth;return t>600},getProductsInShoppingCart:function(){var t=this.$store.state.shoppingCartModule.products;return t},getTotalPriceByItem:function(){return this.BUY.meta.items=this.getProductsInShoppingCart.length,this.BUY.meta.total=this.getProductsInShoppingCart.map(function(t){return t.price_cop}).reduce(function(t,e){return t+e}),this.BUY.meta.total}}},h=d,l=(i("a99c"),i("2877")),u=Object(l["a"])(h,n,a,!1,null,null,null);e["a"]=u.exports},9973:function(t,e,i){"use strict";var n,a,o=i("2877"),s={},r=Object(o["a"])(s,n,a,!1,null,null,null);e["a"]=r.exports},a99c:function(t,e,i){"use strict";var n=i("e0dc"),a=i.n(n);a.a},e0dc:function(t,e,i){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop~f646fbe0"],{"088f":function(t,o,e){"use strict";var c=e("aa48"),r=e.n(c);r.a},"2fc5":function(t,o,e){"use strict";var c=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"products-list"},[t.isFirstPage?t._e():e("div",{staticClass:"goUpButton",on:{click:function(o){return t.goScrollTop()}}},[e("i",{staticClass:"fas fa-arrow-up"})]),t._l(t.productsSortedBy,function(t){return e("ShopProductsListItemComponent",{key:t.ref,attrs:{product:t}})}),e("infinite-loading",{on:{infinite:t.infiniteHandler}},[e("div",{attrs:{slot:"no-results"},slot:"no-results"},[t._v(".")]),e("div",{attrs:{slot:"no-more"},slot:"no-more"},[t._v("-")])])],2)},r=[],n=(e("a481"),e("6762"),e("2fdb"),e("55dd"),e("96cf"),e("3b8d")),s=e("d225"),i=e("b0b4"),a=e("308d"),u=e("6bb5"),d=e("4e2b"),p=e("9ab4"),l=e("60a3"),h=e("e166"),f=e.n(h),g=function(){var t=this,o=t.$createElement,e=t._self._c||o;return t.isNot?t._e():e("div",{staticClass:"products-list-item",class:t.getProducsListItemClass()},[e("div",{staticClass:"product-list-item-wrapper",on:{click:function(o){return t.goToProductView()}}},[t.isNew?e("div",{staticClass:"isNew"},[t._v("NUEVO")]):t._e(),t.product.discount&&0!=t.product.discount?e("ui-floating-discount",{attrs:{discount:t.product.discount}}):t._e(),e("v-lazy-image",{staticClass:"photo",attrs:{src:t.photo_hd_src,"src-placeholder":t.photo_thumb_src},on:{load:function(o){return t.onLoadVLazyImage()}}}),e("h2",{staticClass:"price"},[e("ui-price-tag",{attrs:{price:t.product.price_cop,discount:t.product.discount}})],1),e("h2",{staticClass:"name"},[t._v(t._s(t.product.description)+" "+t._s(t.product.line))]),e("h2",{staticClass:"color"},[t._v("COLOR "+t._s(t.product.color))])],1)])},v=[],m=e("5077"),_=e("b27c"),b=e("8dc2"),y=e.n(b),O=function(t){function o(){var t;return Object(s["a"])(this,o),t=Object(a["a"])(this,Object(u["a"])(o).apply(this,arguments)),t.isNew=!1,t.isNot=!1,t.isPhotoOnStock=!1,t.isProductOnStock=!1,t.photo_hd_src="",t.photo_thumb_src="",t.product_code="",t}return Object(d["a"])(o,t),Object(i["a"])(o,[{key:"getProducsListItemClass",value:function(){return this.isPhotoOnStock?"default":this.isNot?"hidden bye-gone":"hidden"}},{key:"onLoadVLazyImage",value:function(){this.isPhotoOnStock=!0;var t=JSON.parse(""+localStorage.getItem("shopOnStock"));t.push(this.product.ref),localStorage.setItem("shopOnStock",JSON.stringify(t))}},{key:"imageExists",value:function(t){return new Promise(function(o,e){var c=new Image;c.onload=function(){o()},c.onerror=function(){e()},c.src=t})}},{key:"goToProductView",value:function(){var t="".concat(this.product.ref_photo_code,"-01.jpg"),o="gender/".concat(this.product.gender.replace("/","-")),e="category/".concat(this.product.category.replace("/","-")),c="ref/".concat(this.product.ref_photo_code.replace("/","-")),r="description/".concat(this.product.description.replace("/","-")),n="color/".concat(this.product.color.replace("/","-")),s="line/".concat(this.product.line.replace("/","-")),i="photo/".concat(t.replace("/","-"));this.$router.push("/product/".concat(o,"/").concat(e,"/").concat(c,"/").concat(r,"/").concat(n,"/").concat(s,"/").concat(i))}},{key:"mounted",value:function(){var t=this,o="18c776df-f5a7-45a0-9012-16f780381d92",e="".concat(this.product.ref_photo_code,"-01.jpg"),c="https://firebasestorage.googleapis.com/v0/b/trianon-co-pwa-dev.appspot.com/o/Shop-Products-Photos",r="alt=media&token=".concat(o);this.photo_thumb_src="".concat(c,"%2Fthumb%2F").concat(e,"?").concat(r),this.photo_hd_src="".concat(c,"%2Fhd%2F").concat(e,"?").concat(r),this.imageExists(this.photo_thumb_src).then(function(o){t.isNot=!1}).catch(function(o){t.isNot=!0})}}]),o}(l["c"]);p["__decorate"]([Object(l["b"])()],O.prototype,"product",void 0),O=p["__decorate"]([Object(l["a"])({components:{VLazyImage:y.a,"ui-floating-discount":m["a"],"ui-price-tag":_["a"]}})],O);var k=O,w=k,B=(e("088f"),e("2877")),S=Object(B["a"])(w,g,v,!1,null,null,null),D=S.exports,P=e("185b"),C=function(t){function o(){var t;return Object(s["a"])(this,o),t=Object(a["a"])(this,Object(u["a"])(o).apply(this,arguments)),t.products=[],t.productsDB=[],t.productsPageSize=6,t.isFirstPage=!0,t.page=1,t.list=[],t.apiDB=new P["a"],t.db={},t}return Object(d["a"])(o,t),Object(i["a"])(o,[{key:"beforeMount",value:function(){this.apiDB.setDatabaseByName("SHOP-DB"),this.db=this.apiDB.getDatabase()}},{key:"handleScroll",value:function(t){var o=document.documentElement.scrollTop||document.body.scrollTop;this.isFirstPage=o<50}},{key:"created",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"destroyed",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"mounted",value:function(){var t=this,o=this.$route.params,e=o.category?o.category:"",c=(o.category&&o.category,o.gender?o.gender:"");this.db.getProductsByGenderAndCategories(c,e).then(function(){var o=Object(n["a"])(regeneratorRuntime.mark(function o(e){var c;return regeneratorRuntime.wrap(function(o){while(1)switch(o.prev=o.next){case 0:c=t.removeDuplicates(e,"ref_photo_code"),t.productsDB=c,t.products=t.productsDB.slice(0,t.productsPageSize);case 3:case"end":return o.stop()}},o)}));return function(t){return o.apply(this,arguments)}}())}},{key:"removeDuplicates",value:function(t,o){return t.filter(function(t,e,c){return c.map(function(t){return t[o]}).indexOf(t[o])===e})}},{key:"goScrollTop",value:function(){window.scroll({top:0,left:0,behavior:"smooth"})}},{key:"infiniteHandler",value:function(t){var o=this;setTimeout(function(){if(o.products.length!==o.productsDB.length){o.page+=1;var e=o.productsPageSize*o.page;o.products=o.productsDB.slice(0,e),t.loaded()}else t.complete()},0)}},{key:"productsSortedBy",get:function(){var t=this,o=[];return console.warn(this.sortBy),o="price"===this.sortBy.by?-1===this.sortBy.isAscendent?this.productsDB.sort(function(t,o){return t.price_cop-o.price_cop}):this.productsDB.sort(function(t,o){return o.price_cop-t.price_cop}):"color"===this.sortBy.by?this.productsDB.filter(function(o){return o.color.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t.sortBy.keyword.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}):"name"===this.sortBy.by?1===this.sortBy.isAscendent?this.productsDB.sort(function(t,o){var e=t.description+" "+t.line,c=o.description+" "+o.line;return(""+e).localeCompare(c)}):this.productsDB.sort(function(t,o){var e=t.description+" "+t.line,c=o.description+" "+o.line;return(""+c).localeCompare(e)}):this.productsDB,o}}]),o}(l["c"]);p["__decorate"]([Object(l["b"])()],C.prototype,"sortBy",void 0),C=p["__decorate"]([Object(l["a"])({components:{ShopProductsListItemComponent:D,InfiniteLoading:f.a}})],C);var j=C,N=j,L=(e("cda6"),Object(B["a"])(N,c,r,!1,null,null,null));o["a"]=L.exports},"68fd":function(t,o,e){},aa48:function(t,o,e){},cda6:function(t,o,e){"use strict";var c=e("68fd"),r=e.n(c);r.a}}]);